<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Series JSON Manager</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <header class="header">
      <h1>ğŸ¬ Series JSON Manager</h1>
      <div class="header-actions">
        <button class="btn btn-secondary" onclick="openImportModal()">
          ğŸ“¥ Importar
        </button>
        <button class="btn btn-primary" onclick="saveToFile()">
          ğŸ’¾ Guardar JSON
        </button>
      </div>
    </header>

    <div class="main-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <h2>Series</h2>
        <div class="series-list" id="seriesList">
          <!-- Series items will be loaded here -->
        </div>
        <button
          class="btn btn-secondary"
          style="width: 100%; margin-top: 1rem"
          onclick="openNewSeriesModal()"
        >
          + Nueva Serie
        </button>
      </aside>

      <!-- Content -->
      <main class="content" id="mainContent">
        <div class="empty-state">
          <h3>Selecciona una serie</h3>
          <p>O crea una nueva para comenzar</p>
        </div>
      </main>
    </div>

    <!-- Import Modal -->
    <div class="modal-overlay" id="importModal">
      <div class="modal">
        <div class="modal-header">
          <h2>ğŸ“¥ Importar desde YouTube</h2>
          <button class="btn-icon" onclick="closeModal('importModal')">
            âœ•
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>URL de Playlist (para agregar temporada)</label>
            <input
              type="text"
              id="playlistUrl"
              placeholder="https://www.youtube.com/playlist?list=..."
            />
          </div>
          <div class="form-group">
            <label>Agregar a serie</label>
            <select id="targetSeries">
              <option value="">-- Selecciona una serie --</option>
            </select>
          </div>
          <div class="form-group">
            <label>NÃºmero de temporada</label>
            <input type="number" id="seasonNumber" value="1" min="1" />
          </div>
          <div class="form-group">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
              <input type="checkbox" id="getDescriptions" checked style="width: auto;">
              ğŸ“ Importar descripciones como sinopsis (mÃ¡s lento pero incluye sinopsis automÃ¡ticas)
            </label>
          </div>
          <div id="importPreview"></div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="previewPlaylist()">
            ğŸ‘ Vista Previa
          </button>
          <button class="btn btn-primary" onclick="importPlaylist()">
            Importar
          </button>
        </div>
      </div>
    </div>

    <!-- New Series Modal -->
    <div class="modal-overlay" id="newSeriesModal">
      <div class="modal">
        <div class="modal-header">
          <h2>âœ¨ Nueva Serie</h2>
          <button class="btn-icon" onclick="closeModal('newSeriesModal')">
            âœ•
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>URL del Canal de YouTube (opcional)</label>
            <input
              type="text"
              id="channelUrl"
              placeholder="https://www.youtube.com/@canal"
            />
            <button
              class="btn btn-secondary btn-small"
              style="margin-top: 0.5rem"
              onclick="fetchChannelInfo()"
            >
              Obtener info del canal
            </button>
          </div>
          <hr style="border-color: var(--border); margin: 1rem 0" />
          <div class="form-group">
            <label>ID (slug Ãºnico)</label>
            <input
              type="text"
              id="newSeriesId"
              placeholder="nombre-de-la-serie"
            />
          </div>
          <div class="form-group">
            <label>TÃ­tulo</label>
            <input
              type="text"
              id="newSeriesTitle"
              placeholder="Nombre de la Serie"
            />
          </div>
          <div class="form-group">
            <label>Estudio</label>
            <input
              type="text"
              id="newSeriesStudio"
              placeholder="Nombre del estudio"
            />
          </div>
          <div class="form-group">
            <label>AÃ±o de lanzamiento</label>
            <input
              type="number"
              id="newSeriesYear"
              placeholder="2020"
              min="1900"
              max="2100"
            />
          </div>
          <div class="form-group">
            <label>GÃ©neros (selecciona varios)</label>
            <div id="genresCheckboxes" class="checkbox-grid">
              <label><input type="checkbox" value="AnimaciÃ³n" checked> ğŸ¬ AnimaciÃ³n</label>
              <label><input type="checkbox" value="Comedia"> ğŸ˜‚ Comedia</label>
              <label><input type="checkbox" value="Aventura"> ğŸ—ºï¸ Aventura</label>
              <label><input type="checkbox" value="Educativo"> ğŸ“– Educativo</label>
              <label><input type="checkbox" value="Musical"> ğŸµ Musical</label>
              <label><input type="checkbox" value="FantasÃ­a"> âœ¨ FantasÃ­a</label>
              <label><input type="checkbox" value="AcciÃ³n"> ğŸ’¥ AcciÃ³n</label>
              <label><input type="checkbox" value="Ciencia ficciÃ³n"> ğŸš€ Ciencia ficciÃ³n</label>
              <label><input type="checkbox" value="Misterio"> ğŸ” Misterio</label>
              <label><input type="checkbox" value="Naturaleza"> ğŸŒ¿ Naturaleza</label>
              <label><input type="checkbox" value="Deportes"> âš½ Deportes</label>
              <label><input type="checkbox" value="Arte"> ğŸ¨ Arte</label>
              <label><input type="checkbox" value="3D"> ğŸ® 3D</label>
              <label><input type="checkbox" value="2D"> âœï¸ 2D</label>
              <label><input type="checkbox" value="Stop Motion"> ğŸ§¸ Stop Motion</label>
            </div>
          </div>
          <div class="form-group">
            <label>Valores educativos (selecciona varios)</label>
            <div id="valuesCheckboxes" class="checkbox-grid">
              <label><input type="checkbox" value="amistad"> ğŸ¤ Amistad</label>
              <label><input type="checkbox" value="creatividad"> ğŸ¨ Creatividad</label>
              <label><input type="checkbox" value="trabajo en equipo"> ğŸ‘¥ Trabajo en equipo</label>
              <label><input type="checkbox" value="honestidad"> âœ¨ Honestidad</label>
              <label><input type="checkbox" value="respeto"> ğŸ™ Respeto</label>
              <label><input type="checkbox" value="responsabilidad"> ğŸ“‹ Responsabilidad</label>
              <label><input type="checkbox" value="empatÃ­a"> â¤ï¸ EmpatÃ­a</label>
              <label><input type="checkbox" value="perseverancia"> ğŸ’ª Perseverancia</label>
              <label><input type="checkbox" value="curiosidad"> ğŸ” Curiosidad</label>
              <label><input type="checkbox" value="resoluciÃ³n de problemas"> ğŸ§© ResoluciÃ³n de problemas</label>
              <label><input type="checkbox" value="mÃºsica"> ğŸµ MÃºsica</label>
              <label><input type="checkbox" value="naturaleza"> ğŸŒ¿ Naturaleza</label>
              <label><input type="checkbox" value="ciencia"> ğŸ”¬ Ciencia</label>
              <label><input type="checkbox" value="matemÃ¡ticas"> ğŸ”¢ MatemÃ¡ticas</label>
              <label><input type="checkbox" value="lectura"> ğŸ“š Lectura</label>
              <label><input type="checkbox" value="arte"> ğŸ–¼ï¸ Arte</label>
              <label><input type="checkbox" value="deportes"> âš½ Deportes</label>
              <label><input type="checkbox" value="familia"> ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Familia</label>
            </div>
          </div>
          <div class="form-group">
            <label>Sinopsis</label>
            <textarea
              id="newSeriesSynopsis"
              placeholder="DescripciÃ³n de la serie..."
            ></textarea>
          </div>
          <div class="form-group">
            <label>URL del Logo</label>
            <input type="text" id="newSeriesLogo" placeholder="https://..." />
          </div>
          <div class="form-group">
            <label>URL del Banner</label>
            <input type="text" id="newSeriesBanner" placeholder="https://..." />
          </div>
        </div>
        <div class="modal-footer">
          <button
            class="btn btn-secondary"
            onclick="closeModal('newSeriesModal')"
          >
            Cancelar
          </button>
          <button class="btn btn-primary" onclick="createNewSeries()">
            Crear Serie
          </button>
        </div>
      </div>
    </div>

    <!-- Edit Episode Modal -->
    <div class="modal-overlay" id="editEpisodeModal">
      <div class="modal">
        <div class="modal-header">
          <h2>âœï¸ Editar Episodio</h2>
          <button class="btn-icon" onclick="closeModal('editEpisodeModal')">
            âœ•
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>TÃ­tulo</label>
            <div style="display: flex; gap: 0.5rem">
              <input type="text" id="editEpisodeTitle" style="flex: 1" />
              <button
                class="btn btn-secondary btn-small"
                onclick="cleanCurrentTitle()"
              >
                ğŸ§¹ Limpiar
              </button>
            </div>
          </div>
          <div class="form-group">
            <label>Sinopsis</label>
            <textarea id="editEpisodeSynopsis" rows="5"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button
            class="btn btn-secondary"
            onclick="closeModal('editEpisodeModal')"
          >
            Cancelar
          </button>
          <button class="btn btn-primary" onclick="saveEpisodeEdit()">
            Guardar
          </button>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="/static/app.js"></script>
  </body>
</html>
